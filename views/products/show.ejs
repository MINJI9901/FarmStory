<% layout('layouts/boilerplate') %>
<div>
    <div class="row d-flex justify-content-center">
        <div class="products-image-container col col-12 col-md-6 mx-0">
            <img class="product-main-image" src="<%= product.image %>" alt="">
        </div>
        <div class="product-info col col-12 col-md-6 mx-3 my-auto">
            <h2 class="text-muted fs-6 my-2 px-3">
                by <a href="/farms/<%= product.farm._id %>"><%= product.farm.name %></a>
            </h2>

            <%- include('../partials/productComponents/productInfo', product) %>

            <a href="/products/<%= product._id %>/cart" class="add-to-cart-btn basic-btn d-block w-75 fs-6 text-center mx-auto mb-3 py-1">Add To Cart</a>
        </div>
    </div>
    <button class="review-create-button">reviews</button>
</div>

<%- include('../partials/productComponents/productNav') %>

<sectio class="row d-flex justify-content-center mb-5">
    <div class="col col-md-8 col-12">
        <%- include('../partials/productComponents/productDetails') %>
        <div class="col-12">
            <%- include('../partials/reviewComponents/reviewsSummary', { reviews: product.reviews }) %>
        </div>
        <% if (product.reviews.length) { %>
        <%- include('../partials/reviewComponents/reviewsDisplay', { reviews: product.reviews }) %>
        <% } else { %>
        <div class="border py-5">
            <%- include('../partials/reviewComponents/noReviews') %>
        </div>
        <% } %>
    </div>
    <div class="col col-lg-3 col-4">
        <%- include('../partials/productComponents/productInfoBar', { product }) %>
    </div>
</section>

<%- include('../partials/reviewComponents/newReview', { reviews: product.reviews }) %>
<%- include('../partials/reviewComponents/reviewsPopup', { reviews: product.reviews }) %>

<!-- <section class="col-3 border rounded p-2 text-center">
    <div class="my-2 px-3">
        <h2 class="fs-5 my-auto">
            <a href="/products/<%= product._id %>" class=""><%= product.name %></a>
        </h2>
    </div>
    <div class="text-info-emphasis fw-bold px-3">$ <%= product.price.toLocaleString('en', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) %></div>
    <div>
        <input type="number" class="form-control d-inline-block w-25 mx-auto my-2" value="1">
        <select name="option" id="productOption" class="form-control d-inline-block w-50">
            <option value="option1">option1</option>
            <option value="option2">option2</option>
            <option value="option3">option3</option>
        </select>
    </div>

    <div class="my-3">
        <button class="add-to-cart-btn d-block w-75 fs-6 mx-auto mb-2 py-1">Add To Cart</button>
        <button class="buy-btn d-block w-75 fs-6 mx-auto mb-3 py-1">BUY</button>
    </div>
</section> -->